(self["webpackChunkedu_boss_fed"]=self["webpackChunkedu_boss_fed"]||[]).push([[438],{9110:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return b}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("h2",[t._v("筛选搜索")]),r("el-form",{ref:"queryForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryParams}},[r("el-form-item",{attrs:{label:"输入搜索",prop:"name"}},[r("el-input",{attrs:{placeholder:"角色名称",clearable:""},model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1),r("el-form-item",[r("el-button",{on:{click:t.handleReset}},[t._v("重置")])],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:t.isLoading},on:{click:t.loadRoles}},[t._v("查询")])],1)],1)],1),r("el-button",{on:{click:function(e){return t.handleDlg(0)}}},[t._v("添加角色")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.queryResult.records,border:""}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"180",align:"center"}}),r("el-table-column",{attrs:{prop:"name",label:"角色名称",align:"center"}}),r("el-table-column",{attrs:{prop:"description",label:"描述",align:"center"}}),r("el-table-column",{attrs:{prop:"createdTime",formatter:t.timeFormatter,align:"center",label:"添加时间"}}),r("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.$router.push({name:"alloc-menu",params:{roleId:e.row.id}})}}},[t._v("分配菜单")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.$router.push({name:"alloc-resource",params:{roleId:e.row.id}})}}},[t._v("分配资源")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.handleDlg(e.row.id)}}},[t._v("编辑")]),r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){return t.handleRoleDelete(e.row.id)}}},[t._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":t.queryParams.current,"page-sizes":[3,6,10],"page-size":6,layout:"total, sizes, prev, pager, next, jumper",disabled:t.isLoading,total:t.queryResult.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("role-create-or-edit",{ref:"roleDlg",on:{"role-change":t.loadRoles}})],1)},i=[],a=r(9591),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{title:t.currentTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{model:t.formData}},[r("el-form-item",{attrs:{label:"角色名称","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:"角色编码","label-width":t.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.formData.code,callback:function(e){t.$set(t.formData,"code",e)},expression:"formData.code"}})],1),r("el-form-item",{attrs:{label:"描述","label-width":t.formLabelWidth}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.formData.description,callback:function(e){t.$set(t.formData,"description",e)},expression:"formData.description"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:t.isLoading},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1)},o=[],u={name:"RoleCreateOrEdit",data(){return{isCreate:!0,dialogFormVisible:!1,formData:{code:"",id:void 0,name:"",description:""},isLoading:!1,formLabelWidth:"120px"}},computed:{currentTitle(){return this.isCreate?"添加角色":"编辑角色"}},methods:{showAndInit(t){this.formData.id=t,this.isCreate=!t,this.dialogFormVisible=!0,this.isCreate?this.formData={}:(this.isLoading=!0,(0,a.cY)(t).then((t=>{if("000000"===t.data.code){const{id:e,name:r,code:n,description:i}=t.data.data;this.formData={id:e,name:r,code:n,description:i}}})).finally((()=>{this.isLoading=!1})))},onSubmit(){(0,a.zZ)(this.formData).then((t=>{"000000"===t.data.code?(this.$message.success(`${this.currentTitle}成功!`),this.dialogFormVisible=!1,this.$emit("role-change")):this.$message.error(`执行${this.currentTitle}失败...`)}))}}},l=u,c=r(1001),d=(0,c.Z)(l,s,o,!1,null,"478c3d40",null),h=d.exports,f=r(3189),m=r.n(f),$={name:"RoleIndex",data(){return{queryParams:{code:void 0,id:void 0,name:"",current:1,size:6},queryResult:{},isLoading:!1}},created(){this.loadRoles()},methods:{loadRoles(){this.isLoading=!0,(0,a.ix)(this.queryParams).then((t=>{if("000000"===t.data.code){const{current:e,pages:r,records:n,size:i,total:a}=t.data.data;Object.assign(this.queryParams,{current:e,size:i}),this.queryResult={pages:r,records:n,total:a}}else this.$message.error("加载角色列表失败~")})).finally((()=>{this.isLoading=!1}))},timeFormatter(t,e,r,n){return m()(r).format("YYYY-MM-DD")},handleReset(){this.$refs.queryForm.resetFields()},handleSizeChange(t){this.queryParams.size=t,this.queryParams.current=1,this.loadRoles()},handleCurrentChange(t){this.queryParams.current=t,this.loadRoles()},handleDlg(t){this.$refs.roleDlg.showAndInit(t)},handleRoleDelete(t){this.$confirm("确认要删除这个角色吗?","删除提示").then((()=>{(0,a.Rd)(t).then((t=>{"000000"===t.data.code?(this.$message.success("删除角色成功!"),this.loadRoles()):this.$message.error("删除角色失败...")}))})).catch((()=>{this.$message.info("取消删除角色的操作...")}))}},components:{RoleCreateOrEdit:h}},g=$,p=(0,c.Z)(g,n,i,!1,null,"da2e8e80",null),b=p.exports},3189:function(t){!function(e,r){t.exports=r()}(0,(function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",a="minute",s="hour",o="day",u="week",l="month",c="quarter",d="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,$=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},b={s:p,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),i=r%60;return(e<=0?"+":"-")+p(n,2,"0")+":"+p(i,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),i=e.clone().add(n,l),a=r-i<0,s=e.clone().add(n+(a?-1:1),l);return+(-(n+(r-i)/(a?i-s:s-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:d,w:u,d:o,D:h,h:s,m:a,s:i,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},v="en",y={};y[v]=g;var D=function(t){return t instanceof _},M=function t(e,r,n){var i;if(!e)return v;if("string"==typeof e){var a=e.toLowerCase();y[a]&&(i=a),r&&(y[a]=r,i=a);var s=e.split("-");if(!i&&s.length>1)return t(s[0])}else{var o=e.name;y[o]=e,i=o}return!n&&i&&(v=i),i||!n&&v},S=function(t,e){if(D(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new _(r)},w=b;w.l=M,w.i=D,w.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function g(t){this.$L=M(t.locale,null,!0),this.parse(t)}var p=g.prototype;return p.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(m);if(n){var i=n[2]-1||0,a=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},p.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},p.$utils=function(){return w},p.isValid=function(){return!(this.$d.toString()===f)},p.isSame=function(t,e){var r=S(t);return this.startOf(e)<=r&&r<=this.endOf(e)},p.isAfter=function(t,e){return S(t)<this.startOf(e)},p.isBefore=function(t,e){return this.endOf(e)<S(t)},p.$g=function(t,e,r){return w.u(t)?this[e]:this.set(r,t)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(t,e){var r=this,n=!!w.u(e)||e,c=w.p(t),f=function(t,e){var i=w.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?i:i.endOf(o)},m=function(t,e){return w.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},$=this.$W,g=this.$M,p=this.$D,b="set"+(this.$u?"UTC":"");switch(c){case d:return n?f(1,0):f(31,11);case l:return n?f(1,g):f(0,g+1);case u:var v=this.$locale().weekStart||0,y=($<v?$+7:$)-v;return f(n?p-y:p+(6-y),g);case o:case h:return m(b+"Hours",0);case s:return m(b+"Minutes",1);case a:return m(b+"Seconds",2);case i:return m(b+"Milliseconds",3);default:return this.clone()}},p.endOf=function(t){return this.startOf(t,!1)},p.$set=function(t,e){var r,u=w.p(t),c="set"+(this.$u?"UTC":""),f=(r={},r[o]=c+"Date",r[h]=c+"Date",r[l]=c+"Month",r[d]=c+"FullYear",r[s]=c+"Hours",r[a]=c+"Minutes",r[i]=c+"Seconds",r[n]=c+"Milliseconds",r)[u],m=u===o?this.$D+(e-this.$W):e;if(u===l||u===d){var $=this.clone().set(h,1);$.$d[f](m),$.init(),this.$d=$.set(h,Math.min(this.$D,$.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},p.set=function(t,e){return this.clone().$set(t,e)},p.get=function(t){return this[w.p(t)]()},p.add=function(n,c){var h,f=this;n=Number(n);var m=w.p(c),$=function(t){var e=S(f);return w.w(e.date(e.date()+Math.round(t*n)),f)};if(m===l)return this.set(l,this.$M+n);if(m===d)return this.set(d,this.$y+n);if(m===o)return $(1);if(m===u)return $(7);var g=(h={},h[a]=e,h[s]=r,h[i]=t,h)[m]||1,p=this.$d.getTime()+n*g;return w.w(p,this)},p.subtract=function(t,e){return this.add(-1*t,e)},p.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||f;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),a=this.$H,s=this.$m,o=this.$M,u=r.weekdays,l=r.months,c=function(t,r,i,a){return t&&(t[r]||t(e,n))||i[r].slice(0,a)},d=function(t){return w.s(a%12||12,t,"0")},h=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:w.s(o+1,2,"0"),MMM:c(r.monthsShort,o,l,3),MMMM:c(l,o),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:c(r.weekdaysMin,this.$W,u,2),ddd:c(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:w.s(a,2,"0"),h:d(1),hh:d(2),a:h(a,s,!0),A:h(a,s,!1),m:String(s),mm:w.s(s,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:i};return n.replace($,(function(t,e){return e||m[t]||i.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(n,h,f){var m,$=w.p(h),g=S(n),p=(g.utcOffset()-this.utcOffset())*e,b=this-g,v=w.m(this,g);return v=(m={},m[d]=v/12,m[l]=v,m[c]=v/3,m[u]=(b-p)/6048e5,m[o]=(b-p)/864e5,m[s]=b/r,m[a]=b/e,m[i]=b/t,m)[$]||b,f?v:w.a(v)},p.daysInMonth=function(){return this.endOf(l).$D},p.$locale=function(){return y[this.$L]},p.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=M(t,e,!0);return n&&(r.$L=n),r},p.clone=function(){return w.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},g}(),O=_.prototype;return S.prototype=O,[["$ms",n],["$s",i],["$m",a],["$H",s],["$W",o],["$M",l],["$y",d],["$D",h]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,_,S),t.$i=!0),S},S.locale=M,S.isDayjs=D,S.unix=function(t){return S(1e3*t)},S.en=y[v],S.Ls=y,S.p={},S}))},9591:function(t,e,r){"use strict";r.d(e,{GZ:function(){return d},Rd:function(){return o},WR:function(){return l},_9:function(){return c},_L:function(){return u},cY:function(){return a},ix:function(){return i},zZ:function(){return s}});var n=r(5972);const i=t=>(0,n.Z)({method:"POST",url:"/boss/role/getRolePages",data:t}),a=t=>(0,n.Z)({method:"GET",url:`/boss/role/${t}`}),s=t=>(0,n.Z)({method:"POST",url:"/boss/role/saveOrUpdate",data:t}),o=t=>(0,n.Z)({method:"DELETE",url:`/boss/role/${t}`}),u=t=>(0,n.Z)({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:t}}),l=t=>(0,n.Z)({method:"POST",url:"/boss/menu/allocateRoleMenus",data:t}),c=t=>(0,n.Z)({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:t}}),d=(t={})=>(0,n.Z)({method:"POST",url:"/boss/resource/allocateRoleResources",data:t})}}]);