"use strict";(self["webpackChunkedu_boss_fed"]=self["webpackChunkedu_boss_fed"]||[]).push([[893],{58160:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tree",{ref:"menu-tree",attrs:{data:e.roleMenus,props:e.defaultProps,"show-checkbox":"","default-expand-all":"","default-checked-keys":[],"node-key":"id"},on:{"node-click":e.handleNodeClick}}),n("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),n("el-button",{on:{click:e.handleClear}},[e._v("清空")])],1)},o=[],u=(n(9653),n(41539),n(54747),n(92222),n(59591)),s={name:"RoleAllocMenu",props:{roleId:{type:[String,Number],required:!0}},data:function(){return{roleMenus:[],defaultProps:{children:"subMenuList",label:"name"}}},created:function(){this.loadRoleMenus()},methods:{loadRoleMenus:function(){var e=this;(0,u._L)(this.roleId).then((function(t){if("000000"===t.data.code){e.roleMenus=t.data.data;var n=e.getSelectedIds(t.data.data);e.$nextTick((function(){e.$refs["menu-tree"].setCheckedKeys(n)}))}else e.$message.error("获取角色菜单信息失败...")}))},getSelectedIds:function(e){var t=this,n=[];return e.forEach((function(e){if(e.subMenuList){var r=t.getSelectedIds(e.subMenuList);n=n.concat(r)}else e.selected&&n.push(e.id)})),n},handleClear:function(){this.$refs["menu-tree"].setCheckedKeys([])},onSave:function(){var e=this,t={roleId:this.roleId,menuIdList:this.$refs["menu-tree"].getCheckedKeys()};(0,u.WR)(t).then((function(t){"000000"===t.data.code?(e.$message.success("给角色分配菜单操作成功!"),e.$router.push({name:"roles"})):e.$message.error("分配菜单操作失败...")}))}}},a=s,c=n(1001),l=(0,c.Z)(a,r,o,!1,null,"6c6a4966",null),d=l.exports},59591:function(e,t,n){n.d(t,{GZ:function(){return i},Rd:function(){return a},WR:function(){return l},_9:function(){return d},_L:function(){return c},cY:function(){return u},ix:function(){return o},zZ:function(){return s}});var r=n(25972),o=function(e){return(0,r.Z)({method:"POST",url:"/boss/role/getRolePages",data:e})},u=function(e){return(0,r.Z)({method:"GET",url:"/boss/role/".concat(e)})},s=function(e){return(0,r.Z)({method:"POST",url:"/boss/role/saveOrUpdate",data:e})},a=function(e){return(0,r.Z)({method:"DELETE",url:"/boss/role/".concat(e)})},c=function(e){return(0,r.Z)({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}})},l=function(e){return(0,r.Z)({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e})},d=function(e){return(0,r.Z)({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,r.Z)({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})}}}]);