"use strict";(self["webpackChunkedu_boss_fed"]=self["webpackChunkedu_boss_fed"]||[]).push([[926],{59705:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"role-alloc-resource"},[e._l(e.roleResourceData,(function(t){return r("el-card",{key:t.id,staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:function(r){return e.handleCheckAllChange(t)}},model:{value:t.selected,callback:function(r){e.$set(t,"selected",r)},expression:"category.selected"}},[e._v(e._s(t.name))])],1),r("el-checkbox-group",{on:{change:function(r){return e.handleCheckedResourceChange(t)}},model:{value:t.checkedResourceIds,callback:function(r){e.$set(t,"checkedResourceIds",r)},expression:"category.checkedResourceIds"}},[r("el-row",e._l(t.resourceList,(function(t){return r("el-col",{key:t.id,attrs:{span:8}},[r("el-checkbox",{staticStyle:{padding:"7px 0px"},attrs:{label:t.id}},[e._v(e._s(t.name))])],1)})),1)],1)],1)})),r("div",{staticClass:"footer-btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),r("el-button",{on:{click:e.onClear}},[e._v("清空")])],1)],2)},o=[],s=(r(9653),r(2707),r(21249),r(68309),r(82526),r(41817),r(41539),r(54747),r(92222),r(59591)),c={name:"RoleAllocResource",props:{roleId:{type:[String,Number],required:!0}},data:function(){return{roleResourceData:[]}},created:function(){this.loadRoleResources()},methods:{loadRoleResources:function(){var e=this;(0,s._9)(this.roleId).then((function(t){"000000"===t.data.code?e.roleResourceData=t.data.data.map((function(e){var t,r=e.id,n=e.name,o=e.resourceList,s=e.selected,c=e.sort,u=[],a=[];o=null===(t=o)||void 0===t?void 0:t.map((function(e){var t=e.id,r=e.name,n=e.selected,o=e.url,s=e.description;return n&&u.push(t),a.push(t),{id:t,name:r,selected:n,url:o,description:s}}));var l=u.length>0&&u.length<a.length;return s=u.length===a.length,{id:r,name:n,resourceList:o,selected:s,sort:c,checkedResourceIds:u,allResourceIds:a,isIndeterminate:l}})).sort((function(e,t){return e.id-t.id})):e.$message.error("获取角色拥有的资源信息失败...")}))},handleCheckAllChange:function(e){e.checkedResourceIds=e.selected?e.allResourceIds:[],e.isIndeterminate=!1},handleCheckedResourceChange:function(e){var t=e.checkedResourceIds.length,r=e.allResourceIds.length;e.selected=t===r,e.isIndeterminate=t>0&&t<r},onClear:function(){this.roleResourceData.forEach((function(e){e.checkedResourceIds=[],e.selected=!1}))},onSave:function(){var e=this,t=this.roleId,r=this.roleResourceData,n=r.reduce((function(e,t){return e.concat(t.checkedResourceIds)}),[]);(0,s.GZ)({roleId:t,resourceIdList:n}).then((function(t){"000000"===t.data.code?(e.$message.success("给角色分配资源成功!"),e.$router.push({name:"roles"})):e.$message.error("给角色分配资源失败...")}))}}},u=c,a=r(1001),l=(0,a.Z)(u,n,o,!1,null,"134d6056",null),d=l.exports},59591:function(e,t,r){r.d(t,{GZ:function(){return i},Rd:function(){return u},WR:function(){return l},_9:function(){return d},_L:function(){return a},cY:function(){return s},ix:function(){return o},zZ:function(){return c}});var n=r(25972),o=function(e){return(0,n.Z)({method:"POST",url:"/boss/role/getRolePages",data:e})},s=function(e){return(0,n.Z)({method:"GET",url:"/boss/role/".concat(e)})},c=function(e){return(0,n.Z)({method:"POST",url:"/boss/role/saveOrUpdate",data:e})},u=function(e){return(0,n.Z)({method:"DELETE",url:"/boss/role/".concat(e)})},a=function(e){return(0,n.Z)({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}})},l=function(e){return(0,n.Z)({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e})},d=function(e){return(0,n.Z)({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.Z)({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})}}}]);