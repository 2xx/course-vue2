"use strict";(self["webpackChunkedu_boss_fed"]=self["webpackChunkedu_boss_fed"]||[]).push([[893],{8160:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-tree",{ref:"menu-tree",attrs:{data:e.roleMenus,props:e.defaultProps,"show-checkbox":"","default-expand-all":"","default-checked-keys":[],"node-key":"id"},on:{"node-click":e.handleNodeClick}}),s("el-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),s("el-button",{on:{click:e.handleClear}},[e._v("清空")])],1)},o=[],n=s(9591),u={name:"RoleAllocMenu",props:{roleId:{type:[String,Number],required:!0}},data(){return{roleMenus:[],defaultProps:{children:"subMenuList",label:"name"}}},created(){this.loadRoleMenus()},methods:{loadRoleMenus(){(0,n._L)(this.roleId).then((e=>{if("000000"===e.data.code){this.roleMenus=e.data.data;const t=this.getSelectedIds(e.data.data);this.$nextTick((()=>{this.$refs["menu-tree"].setCheckedKeys(t)}))}else this.$message.error("获取角色菜单信息失败...")}))},getSelectedIds(e){let t=[];return e.forEach((e=>{if(e.subMenuList){const s=this.getSelectedIds(e.subMenuList);t=t.concat(s)}else e.selected&&t.push(e.id)})),t},handleClear(){this.$refs["menu-tree"].setCheckedKeys([])},onSave(){const e={roleId:this.roleId,menuIdList:this.$refs["menu-tree"].getCheckedKeys()};(0,n.WR)(e).then((e=>{"000000"===e.data.code?(this.$message.success("给角色分配菜单操作成功!"),this.$router.push({name:"roles"})):this.$message.error("分配菜单操作失败...")}))}}},l=u,a=s(1001),d=(0,a.Z)(l,r,o,!1,null,"6c6a4966",null),c=d.exports},9591:function(e,t,s){s.d(t,{GZ:function(){return i},Rd:function(){return l},WR:function(){return d},_9:function(){return c},_L:function(){return a},cY:function(){return n},ix:function(){return o},zZ:function(){return u}});var r=s(5972);const o=e=>(0,r.Z)({method:"POST",url:"/boss/role/getRolePages",data:e}),n=e=>(0,r.Z)({method:"GET",url:`/boss/role/${e}`}),u=e=>(0,r.Z)({method:"POST",url:"/boss/role/saveOrUpdate",data:e}),l=e=>(0,r.Z)({method:"DELETE",url:`/boss/role/${e}`}),a=e=>(0,r.Z)({method:"GET",url:"/boss/menu/getRoleMenus",params:{roleId:e}}),d=e=>(0,r.Z)({method:"POST",url:"/boss/menu/allocateRoleMenus",data:e}),c=e=>(0,r.Z)({method:"GET",url:"/boss/resource/getRoleResources",params:{roleId:e}}),i=(e={})=>(0,r.Z)({method:"POST",url:"/boss/resource/allocateRoleResources",data:e})}}]);